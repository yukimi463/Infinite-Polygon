<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- 🌌 ページタイトル -->
  <title>Infinite Polygon</title>

  <!-- 📜 ページ説明（これが重要）-->
  <meta name="description" content="多角形を進化させて宇宙を目指すブラウザ育成ゲーム。Infinite Polygon。">

  <!-- 🪐 SNS・共有用 -->
  <meta property="og:title" content="Infinite Polygon">
  <meta property="og:description" content="多角形を進化させて宇宙を目指すブラウザ育成ゲーム。">
  <meta property="og:image" content="https://yourname.github.io/infinite-polygon/thumbnail.png">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://yourname.github.io/infinite-polygon/">
  <meta name="twitter:card" content="summary_large_image">

  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/background.css">
  <link rel="stylesheet" href="css/polygon.css">
  <link rel="stylesheet" href="css/ui.css">
  <link rel="stylesheet" href="css/modal.css">
  <link rel="stylesheet" href="css/effects.css">

</head>

<body>
  <!-- 🌌 宇宙背景レイヤー -->
  <div class="aurora"></div>
  <div class="shooting-star"></div>
  <div class="shooting-star"></div>
  <div class="shooting-star"></div>

  <!-- ゲームUI -->
  <div class="total-counter" id="totalCounter">所持金: 0</div>
  <div id="autoToggleContainer"></div>
  <div id="modeToggleContainer"></div>
  <div id="eventToggleContainer"></div>

  <h1>Infinite Polygon</h1>

  <!-- 🌕 円度ゲージ表示 -->
  <div class="roundness-display" id="roundnessDisplay">円度: 0%</div>
  <div class="roundness-bar">
    <div id="roundnessFill"></div>
  </div>

  <!-- 🧭 モード変更モーダル -->
  <div id="modeModal" class="modal hidden">
    <div class="modal-content">
      <h2>🧭 モード選択</h2>

      <div class="feature-list">
        <!-- 通常モード -->
        <div class="feature-item" id="modeModalNormal">
          <h3>通常モード</h3>
          <p>標準状態です。</p>
          <button onclick="selectMode('normal')">選択</button>
        </div>

        <!-- 瞑想モード -->
        <div class="feature-item" id="meditationModeItem">
          <h3>瞑想モード</h3>
          <p>ゆっくりカウント（クールダウン効果）</p>
          <p class="cost">💰 解放コスト: 10,000</p>
          <button onclick="unlockMode('meditation', 10000)">解放</button>
        </div>

        <!-- 加速モード -->
        <div class="feature-item" id="accelerationModeItem">
          <h3>加速モード</h3>
          <p id="accelerationDescription">10秒間クリック倍率2倍</p>
          <p class="cost">💰 解放コスト: 100,000</p>
          <button onclick="unlockMode('acceleration', 100000)">解放</button>
        </div>
      </div>

      <button class="close-btn" onclick="closeModeModal()">閉じる</button>
    </div>
  </div>

  <div id="gameWrapper" style="display: flex; flex-direction: row; align-items: center;">
      <!-- 多角形はJSで追加される -->
  </div>

  <div style="margin-top:24px;">
      <button id="evolveBtn" class="auto-btn" disabled>
          進化する（解放コスト: <span id="evolveCostText">10</span>）
      </button>
      <button id="powerupBtn" class="auto-btn" disabled>
          強化する（Lv.<span id="powerupLevelText">0</span> 解放コスト: <span id="powerupCostText">1</span>）
      </button>
  </div>

  <!-- 🔓 機能解放ボタン -->
  <div style="margin-top:16px;">
    <button id="unlockFeatureBtn" class="auto-btn">🔓 機能解放</button>
  </div>

  <!-- 🔓 機能解放モーダル -->
  <div id="unlockModal" class="modal hidden">
    <div class="modal-content">
      <h2>🔓 機能解放</h2>
      <div class="feature-list">
        <!-- オートカウント -->
        <div class="feature-item" id="feature-auto">
          <h3>オートカウント機能</h3>
          <p>一定間隔で自動的にクリックするボタンを追加します。<p>(ON/OFF切り替え可)</p>
          <p class="cost">💰 解放コスト: 100</p>
          <button onclick="unlockFeature('autoCount', 100)">解放</button>
        </div>

        <!-- ミニ正多角形生成機能 -->
        <div class="feature-item" id="feature-mini">
          <h3>ミニ正多角形生成機能</h3>
          <p>クリック時に1%の確率で小さな多角形が<p>周囲に生まれます。</p>
          <p class="cost">💰 解放コスト: 1k</p>
          <button onclick="unlockFeature('miniPolygon', 1000)">解放</button>
        </div>

        <!-- 虹色変色機能 -->
        <div class="feature-item" id="feature-rainbow">
          <h3>虹色変色機能</h3>
          <p>多角形が虹色に変化するボタンを追加します<p>(クリック倍率:10倍)。</p>
          <p class="cost">💰 解放コスト: 5k</p>
          <button onclick="unlockFeature('rainbow', 5000)">解放</button>
        </div>

        <!-- モード変更 -->
        <div class="feature-item" id="feature-mode">
          <h3>モード変更機能</h3>
          <p>瞑想・加速など、特別なモードに切り替えるボタンを追加します。</p>
          <p class="cost">💰 解放コスト: 10k</p>
          <button onclick="unlockFeature('modeChange', 10000)">解放</button>
        </div>

        <!-- イベント -->
        <div class="feature-item" id="feature-event">
          <h3>イベント解放機能</h3>
          <p>イベント解放を行うボタンを追加します。</p>
          <p class="cost">💰 解放コスト: 100k</p>
          <button onclick="unlockFeature('eventResonance', 100000)">解放</button>
        </div>
      </div>
      <button class="close-btn" onclick="closeUnlockModal()">閉じる</button>
    </div>
  </div>

  <!-- 🌌 イベントモーダル -->
  <div id="eventModal" class="modal hidden">
    <div class="modal-content">
      <h2>🌠 イベント選択</h2>
      <div class="feature-list">
        <div class="feature-item" id="event-vertex">
          <h3>頂点共鳴</h3>
          <p>5秒に一度、流星群と共に多角形の頂点が光り輝きます<p>(輝く数は頂点数をMAXとしてランダムに選択されます)</p>
          <p class="cost">💰 解放コスト: 100k</p>
          <button onclick="unlockFeature('vertexResonance', 100000)">解放</button>
        </div>

        <div class="feature-item" id="event-time">
          <h3>時空反転</h3>
          <p>カウントを一時的に巻き戻して再構築します。</p>
          <p class="cost">💰 解放コスト: 1M</p>
          <button onclick="unlockFeature('timeReversal', 10000000)">解放</button>
        </div>

        <div class="feature-item" id="event-geometry">
          <h3>幾何の囁き</h3>
          <p>一定時間クリック倍率が上昇します。</p>
          <p class="cost">💰 解放コスト: 1B</p>
          <button onclick="unlockFeature('geometryWhisper', 100000000)">解放</button>
        </div>
      </div>
      <button class="close-btn" onclick="closeEventModal()">閉じる</button>
    </div>
  </div>

  <!-- 💾 セーブ・ロードボタン -->
  <div style="margin-top:16px;">
    <button class="save-btn" onclick="saveGame()">💾 セーブ</button>
    <button class="load-btn" onclick="loadGame()">📂 ロード</button>
    <button class="reset-btn" onclick="resetGameData()">🗑️ データリセット</button>
  </div>

<script src="js/variables.js"></script>
<script src="js/utils.js"></script>
<script src="js/polygonCore.js"></script>
<script src="js/vertexResonance.js"></script>
<script src="js/polyhedron.js"></script>
<script src="js/gameLogic.js"></script>
<script src="js/autoCount.js"></script>
<script src="js/rainbow.js"></script>
<script src="js/saveload.js"></script>
<script src="js/modeMeditation.js"></script>
<script src="js/modeAcceleration.js"></script>
<script src="js/modeController.js"></script>
<script src="js/eventController.js"></script>
<script src="js/unlock.js"></script> <!-- 👈 ここを modeController の後ろへ -->
<script src="js/main.js"></script>

</body>
</html>
